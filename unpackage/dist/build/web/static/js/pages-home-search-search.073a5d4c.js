(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-home-search-search"],{"0684":function(t,a,e){"use strict";var i=e("0fd8"),n=e.n(i);n.a},"0fd8":function(t,a,e){var i=e("cfad");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("4f06").default;n("ce463232",i,!0,{sourceMap:!1,shadowMode:!1})},"3a89":function(t,a,e){"use strict";e.r(a);var i=e("ec07"),n=e("c3f2");for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(s);e("0684");var o=e("f0c5"),r=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"6039a212",null,!1,i["a"],void 0);a["default"]=r.exports},c3f2:function(t,a,e){"use strict";e.r(a);var i=e("f46f"),n=e.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(s);a["default"]=n.a},cfad:function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.search-area[data-v-6039a212]{height:%?120?%}.search-area uni-input[data-v-6039a212]{width:%?560?%;padding-left:%?60?%;height:%?64?%;line-height:%?64?%;background-color:#f5f5f5}.search-area .icon-search[data-v-6039a212]{top:50%;left:%?40?%;-webkit-transform:translateY(-50%);transform:translateY(-50%);z-index:1}.search-area .icon-search uni-text[data-v-6039a212]{color:silver}',""]),t.exports=a},ec07:function(t,a,e){"use strict";e.d(a,"b",(function(){return i})),e.d(a,"c",(function(){return n})),e.d(a,"a",(function(){}));var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"use-page"},[e("v-uni-view",{staticClass:"search-area pos-r w-full padding-lr dflex-b"},[e("v-uni-view",{staticClass:"h-full flex1 dflex-c"},[e("v-uni-view",{staticClass:"icon-search pos-a"},[e("v-uni-text",{staticClass:"iconfont iconsousuo-01"})],1),e("v-uni-input",{staticClass:"pos-a padding-left padding-tb-xs border-radius-lg box-sizing-b",attrs:{type:"text",maxlength:"20",placeholder:"请输入关键字"},on:{confirm:function(a){arguments[0]=a=t.$handleEvent(a),t.search.apply(void 0,arguments)}},model:{value:t.keyword,callback:function(a){t.keyword=a},expression:"keyword"}})],1),e("v-uni-view",{staticClass:"bg-base border-radius-big padding-tb-xs padding-lr margin-left",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.search.apply(void 0,arguments)}}},[t._v("搜索")])],1),e("v-uni-view",{staticClass:"gap"}),t.historyDatas&&t.historyDatas.length>0?e("v-uni-view",{staticClass:"padding-lr w-full padding-top-lg"},[e("v-uni-view",{staticClass:"dflex-b"},[e("v-uni-view",{staticClass:"dflex"},[e("v-uni-text",[t._v("搜索历史")])],1),e("v-uni-view",{staticClass:"iconfont iconfont iconlajitong-01 dflex-c ft-dark padding-sm",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.clear.apply(void 0,arguments)}}})],1),e("v-uni-view",{staticClass:"dflex dflex-wrap-w"},t._l(t.historyDatas,(function(a,i){return e("v-uni-view",{key:i,staticClass:"item margin-right-sm margin-bottom-sm dflex bg-drak border-radius-lg padding-tb-xs padding-lr",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.search("history",a)}}},[e("v-uni-text",[t._v(t._s(a.keyword))])],1)})),1)],1):t._e(),t.hotDatas&&t.hotDatas.length>0?e("v-uni-view",{staticClass:"padding-lr w-full padding-top-lg"},[e("v-uni-view",{staticClass:"padding-bottom-sm dflex-b"},[e("v-uni-view",{staticClass:"dflex"},[e("v-uni-text",[t._v("热门搜索")])],1)],1),e("v-uni-view",{staticClass:"dflex dflex-wrap-w"},t._l(t.hotDatas,(function(a,i){return e("v-uni-view",{key:i,staticClass:"item margin-right-sm margin-bottom-sm dflex bg-drak border-radius-lg padding-tb-xs padding-lr",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.search("hot",a)}}},[e("v-uni-text",[t._v(t._s(a.keyword))])],1)})),1)],1):t._e()],1)},n=[]},f46f:function(t,a,e){"use strict";e("7a82");var i=e("ee27").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=i(e("f3f3")),s=e("26cb"),o={computed:(0,n.default)({},(0,s.mapState)(["islogin"])),data:function(){return{keyword:"",historyDatas:[],hotDatas:[]}},onShow:function(){this.keyword="",this.loadData()},methods:{loadData:function(){var t=this;this.islogin&&this.$db["usemall-search-history"].where("create_uid == $env.uid").tolist({orderby:"last_modify_time desc"}).then((function(a){200===a.code&&(t.historyDatas=a.datas)})),this.$db["usemall-search-hot"].tolist({orderby:"search_cnt desc"}).then((function(a){200===a.code&&(t.hotDatas=a.datas)}))},search:function(t,a){switch(t){case"history":this.$api.togoodslist({keyword:a.keyword});break;case"hot":this.$api.togoodslist({sid:a._id});break;default:this.$api.togoodslist({keyword:this.keyword});break}},clear:function(){var t=this;uni.showModal({title:"提示",content:"清空搜索历史",success:function(a){a.confirm?t.$db["usemall-search-history"].where("create_uid == $env.uid").remove().then((function(a){200!==a.code?t.$api.msg(a.msg):t.historyDatas=[]})):a.cancel&&console.log("用户点击取消")}})}}};a.default=o}}]);