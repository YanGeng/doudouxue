(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{2100:function(t,n,e){"use strict";e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return o})),e.d(n,"a",(function(){return i}));var i={useCopyright:e("7a3f").default},a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",{staticClass:"container bg-main pos-r"},[e("v-uni-view",{staticClass:"padding-xl dflex-c dflex-flow-c"},[e("v-uni-view",{staticClass:"portrait-box margin-bottom"},[e("v-uni-image",{staticClass:"headimg border-radius-c",attrs:{src:t.member&&t.member.member_headimg||"/static/images/user/default.png"}})],1),e("v-uni-view",{staticClass:"w-full dflex padding-bottom-sm"},[e("v-uni-view",{staticClass:"iconfont iconshouji margin-right"}),e("v-uni-view",{staticClass:"flex1 dflex"},[e("v-uni-input",{staticClass:"border-line padding-sm flex1",attrs:{type:"number","data-key":"mobile",maxlength:"11",value:t.mobile,placeholder:"请输入手机号"},on:{input:function(n){arguments[0]=n=t.$handleEvent(n),t.inputChange.apply(void 0,arguments)}}}),t._e()],1)],1),e("v-uni-view",{staticClass:"w-full dflex"},[e("v-uni-view",{staticClass:"iconfont iconmima margin-right"}),e("v-uni-input",{staticClass:"border-line padding-sm flex1",attrs:{type:"password",password:!0,"data-key":"password",maxlength:"20",value:t.password,placeholder:"请输入密码"},on:{input:function(n){arguments[0]=n=t.$handleEvent(n),t.inputChange.apply(void 0,arguments)},confirm:function(n){arguments[0]=n=t.$handleEvent(n),t.tologin.apply(void 0,arguments)}}})],1),e("v-uni-view",{staticClass:"dflex-b w-full margin-bottom-sm"},[e("v-uni-view",{staticClass:"padding-tb-sm ft-dark",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.toforget.apply(void 0,arguments)}}},[t._v("忘记密码")]),e("v-uni-view",{staticClass:"padding-tb-sm ft-base",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.toregister.apply(void 0,arguments)}}},[t._v("立即注册")])],1),e("v-uni-view",{staticClass:"w-full margin-top-xl"},[e("v-uni-view",{staticClass:"dflex-b border-radius-lg"},[e("v-uni-view",{staticClass:"tac padding-tb-sm flex1 bg-base fs",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.tologin.apply(void 0,arguments)}}},[t._v("登录")])],1)],1)],1),t.ismp?e("v-uni-view",{staticClass:"dflex-c margin-top-big"}):t._e(),e("use-copyright",{staticClass:"pos-f w-full",staticStyle:{bottom:"-30rpx"}}),t.isshow?e("v-uni-view",{staticClass:"l-mask"}):t._e(),t.isshow?e("v-uni-view",{staticClass:"box-container"},[e("v-uni-view",{staticClass:"title"},[e("v-uni-text",[t._v("授权手机号，同步会员|收货信息")])],1),e("v-uni-view",{staticClass:"btn-contaer"},[e("v-uni-button",{on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.cancel.apply(void 0,arguments)}}},[t._v("取消")]),e("v-uni-button",{attrs:{"open-type":"getPhoneNumber",withCredentials:"true"},on:{getphonenumber:function(n){arguments[0]=n=t.$handleEvent(n),t.mpPhoneNumber.apply(void 0,arguments)}}},[t._v("授权")])],1)],1):t._e()],1)},o=[]},2711:function(t,n,e){"use strict";e.r(n);var i=e("4759"),a=e.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(o);n["default"]=a.a},"2d42":function(t,n,e){"use strict";var i=e("d45e"),a=e.n(i);a.a},3366:function(t,n,e){var i=e("24fb");n=i(!1),n.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.use-copyright[data-v-4401d4eb]{height:%?180?%}.use-copyright uni-text[data-v-4401d4eb]{color:silver}',""]),t.exports=n},"352f":function(t,n,e){"use strict";e.r(n);var i=e("54d2"),a=e.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(o);n["default"]=a.a},4759:function(t,n,e){"use strict";e("7a82"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={props:{},data:function(){return{}},methods:{to:function(){this.$emit("to",{type:"to"})}}}},"48c1":function(t,n,e){var i=e("8210");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=e("4f06").default;a("70c70adc",i,!0,{sourceMap:!1,shadowMode:!1})},"54d2":function(t,n,e){"use strict";e("7a82");var i=e("ee27").default;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("498a");var a=i(e("f3f3")),o=e("26cb"),s={data:function(){return{ismp:!1,platform:"",platform_name:"",platform_icon:"",env:{},isshow:!1,mobile:"",password:"",authorize:0}},computed:(0,a.default)({},(0,o.mapState)(["member"])),onShow:function(){console.log("login Show");var t=this;uni.getStorage({key:"__mobile",success:function(n){t.mobile=n.data}}),uni.canIUse("getSetting")&&uni.getSetting({success:function(n){console.log("getSetting ",n),t.authorize=n.authSetting["scope.userInfo"],console.log("getSetting scope.userInfo authorize ",t.authorize)}})},onLoad:function(){var t=this;this.$api.get_env((function(n){t.env=n,console.log("this.env",t.env),t.ismp=t.env.is_mp,t.platform=t.env.platform,t.platform_icon=t.env.platform_icon,t.platform_name=t.env.platform_name}))},methods:(0,a.default)((0,a.default)({},(0,o.mapMutations)(["login","logout","token"])),{},{inputChange:function(t){var n=t.currentTarget.dataset.key;this[n]=t.detail.value},toforget:function(){uni.navigateTo({url:"/pages/login/forgot-password"})},toregister:function(){uni.navigateTo({url:"/pages/login/register"})},tologin:function(){var t=this;t.is_login||(this.mobile?this.password?this.$api.trim(this.password).length<4?this.$api.msg("密码长度不能小于4位"):this.$func.usemall.call("member/login",{username:this.mobile,password:this.password}).then((function(n){if(200==n.code)return t.login(n.datas),void t.$api.alert("登录成功",(function(){uni.reLaunch({url:"/pages/tabbar/home"})}));t.$api.msg(n.msg)})):this.$api.msg("请输入密码"):this.$api.msg("请输入手机号"))},cancel:function(){this.isshow=!1,uni.navigateBack()},mpPhoneNumber:function(t){if(this.$api.msg("处理中"),!t.detail.encryptedData)return"getPhoneNumber:fail no permission"===t.detail.errMsg&&"qq"===this.platform?uni.showToast({title:"QQ暂无法获取手机号",icon:"none"}):uni.showToast({title:"您取消了授权，操作失败",icon:"none"}),this.isshow=!1,uni.navigateBack(),!1;console.log("------- mpPhoneNumber 用户授权，并获取用户基本信息和加密数据------"),console.log(t.detail)},mpGetUserInfo:function(t){this.$api.msg("处理中"),this.logout(),this.$api.msg("请使用手机号+密码的方式登录"),"weixin"===this.platform||"baidu"===this.platform||"qq"===this.platform||"toutiao"===this.platform||this.$api.msg("请使用手机号+密码的方式登录")},getUserInfo:function(){this.$api.msg("处理中"),console.log("------- getUserInfo 用户授权，并获取用户基本信息和加密数据------")},getUserProfile:function(){uni.getUserProfile()}})};n.default=s},"58c9":function(t,n,e){"use strict";e.r(n);var i=e("2100"),a=e("352f");for(var o in a)["default"].indexOf(o)<0&&function(t){e.d(n,t,(function(){return a[t]}))}(o);e("b68c");var s=e("f0c5"),r=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"b6e1d57e",null,!1,i["a"],void 0);n["default"]=r.exports},"7a3f":function(t,n,e){"use strict";e.r(n);var i=e("97bf"),a=e("2711");for(var o in a)["default"].indexOf(o)<0&&function(t){e.d(n,t,(function(){return a[t]}))}(o);e("2d42");var s=e("f0c5"),r=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"4401d4eb",null,!1,i["a"],void 0);n["default"]=r.exports},8210:function(t,n,e){var i=e("24fb");n=i(!1),n.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-b6e1d57e]{background:#f4f4f4}body.?%PAGE?%[data-v-b6e1d57e]{background:#f4f4f4}.container[data-v-b6e1d57e]{padding-top:5vh;width:100vw;min-height:100vh;overflow:hidden}.portrait-box uni-image[data-v-b6e1d57e]{width:%?130?%;height:%?130?%;border:%?5?% solid #fff}.l-mask[data-v-b6e1d57e]{position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(51,51,51,.3);z-index:99}.box-container[data-v-b6e1d57e]{position:absolute;width:%?500?%;height:%?300?%;background:#fff;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);top:50%;z-index:999;border-radius:%?10?%;text-align:center;padding:%?30?%}.box-container .title[data-v-b6e1d57e]{margin-top:%?40?%;font-size:%?30?%}.box-container .btn-contaer[data-v-b6e1d57e]{display:flex;position:absolute;bottom:%?30?%;left:%?30?%;right:%?30?%}.box-container uni-button[data-v-b6e1d57e]{background:#eee;color:#333;width:50%;font-size:%?28?%}.box-container uni-button[data-v-b6e1d57e]:last-child{margin-left:10px;background:#26a92e;color:#fff}',""]),t.exports=n},"97bf":function(t,n,e){"use strict";e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){}));var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",[e("v-uni-view",{staticClass:"use-copyright dflex-c padding-lr w-full",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.to.apply(void 0,arguments)}}},[t._e(),e("v-uni-view",{staticClass:"ft-dark"},[t._v("严选")]),e("v-uni-text",{staticClass:"margin-lr-xs"},[t._v("·")]),e("v-uni-text",[t._v("让开发更简单")])],1)],1)},a=[]},b68c:function(t,n,e){"use strict";var i=e("48c1"),a=e.n(i);a.a},d45e:function(t,n,e){var i=e("3366");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=e("4f06").default;a("03340b7d",i,!0,{sourceMap:!1,shadowMode:!1})}}]);